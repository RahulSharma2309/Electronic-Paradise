{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "Docker: Build All Services",
      "type": "shell",
      "command": "$env:DOCKER_BUILDKIT=0; cd infra; docker-compose build",
      "problemMatcher": [],
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared",
        "showReuseMessage": true,
        "clear": false
      },
      "group": {
        "kind": "build",
        "isDefault": false
      }
    },
    {
      "label": "Docker: Start All Services",
      "type": "shell",
      "command": "$env:DOCKER_BUILDKIT=0; cd infra; docker-compose up -d",
      "problemMatcher": [],
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared",
        "showReuseMessage": true,
        "clear": false
      }
    },
    {
      "label": "Docker: Build & Start All Services",
      "type": "shell",
      "command": "${workspaceFolder}/scripts/docker-build-start.ps1",
      "problemMatcher": [],
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared",
        "showReuseMessage": true,
        "clear": false
      },
      "group": {
        "kind": "build",
        "isDefault": true
      }
    },
    {
      "label": "Docker: Stop All Services",
      "type": "shell",
      "command": "cd infra; docker-compose down",
      "problemMatcher": [],
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared",
        "showReuseMessage": true,
        "clear": false
      }
    },
    {
      "label": "Docker: Stop & Remove Volumes",
      "type": "shell",
      "command": "cd infra; docker-compose down -v",
      "problemMatcher": [],
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared",
        "showReuseMessage": true,
        "clear": false
      }
    },
    {
      "label": "Docker: View Service Status",
      "type": "shell",
      "command": "docker ps --format 'table {{.Names}}\\t{{.Status}}\\t{{.Ports}}'",
      "problemMatcher": [],
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "shared",
        "showReuseMessage": true,
        "clear": false
      }
    },
    {
      "label": "Docker: View Logs (All Services)",
      "type": "shell",
      "command": "cd infra; docker-compose logs -f --tail=100",
      "isBackground": true,
      "problemMatcher": [],
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "dedicated",
        "showReuseMessage": false,
        "clear": false
      }
    },
    {
      "label": "Docker: Clean All (Restart Fresh)",
      "type": "shell",
      "command": "$env:DOCKER_BUILDKIT=0; cd infra; docker-compose down -v; docker-compose build; docker-compose up -d",
      "problemMatcher": [],
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared",
        "showReuseMessage": true,
        "clear": false
      }
    },
    {
      "label": "dotnet: Build All Services",
      "type": "shell",
      "command": "dotnet build ${workspaceFolder}/Electronic-Paradise.sln",
      "problemMatcher": "$msCompile",
      "group": "build",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared",
        "showReuseMessage": true,
        "clear": false
      }
    },
    {
      "label": "dotnet: Run All Tests",
      "type": "shell",
      "command": "dotnet test ${workspaceFolder}/Electronic-Paradise.sln --logger 'console;verbosity=detailed'",
      "problemMatcher": "$msCompile",
      "group": "test",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared",
        "showReuseMessage": true,
        "clear": false
      }
    }
  ]
}
